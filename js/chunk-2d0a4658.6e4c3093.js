(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a4658"],{"05eb":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"grid"},[r("div",{staticClass:"flex flex-column justify-center justify-center grid-column-12 grid-column-6--lg min-height-full-view--xl relative overflow-hidden padding-3"},[r("img-spot-gray2",{staticClass:"spot-gray2-hero-auth absolute left-0 center-y"}),r("div",{staticClass:"flex flex-column justify-center items-center height-full relative"},[r("img-auth",{staticClass:"img-auth flex-no-shrink"})],1)],1),r("div",{staticClass:"grid-column-12 grid-column-6--lg height-full-view--lg overflow-auto padding-x-3 padding-x-5--lg padding-x-6--xxl padding-y-5 bg-lite color-primary-light"},[r("div",{staticClass:"flex justify-between items-center"},[r("router-link",{staticClass:"btn btn--plain btn--tight",attrs:{to:{name:"guestMain"}}},[r("icon-home",{staticClass:"width-1 margin-right-1"}),r("span",{domProps:{textContent:e._s(e.$t("page.home"))}})],1),r("lang-menu",{staticClass:"hidden block--lg"})],1),r("div",{staticClass:"flex justify-center padding-y-4"},[r("router-link",{staticClass:"logo flex",attrs:{to:{name:"guestMain"}}},[r("icon-logo",{staticClass:"width-5"})],1)],1),e.$route.params.token?r("h1",{staticClass:"text-center",domProps:{textContent:e._s(e.$t("ui.password_new"))}}):r("h1",{staticClass:"text-center",domProps:{textContent:e._s(e.$t("page.recovery"))}}),r("div",{staticClass:"padding-4 padding-6--md padding-4--lg border-primary-light border-rounded-4"},[e.$route.params.token?r("div",{staticClass:"grid grid-row-gap-4 grid-column-gap-4--md grid-column-gap-0--lg grid-column-gap-4--xl"},[r("div",{staticClass:"grid-column-12 grid-column-6--md grid-column-12--lg grid-column-6--xl"},[r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,min:6},expression:"{ required: true, min: 6 }"}],ref:"newPasswordFirst",attrs:{label:e.$t("ui.password_new"),disabled:e.isLoading,error:e.errors.first("ui.passwordNew","newPasswordForm"),type:"password",dataName:"passwordNew","data-vv-scope":"newPasswordForm"},on:{focus:function(t){e.newPasswordForm.second=""},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updatePassword(t)}},model:{value:e.newPasswordForm.first,callback:function(t){e.$set(e.newPasswordForm,"first",t)},expression:"newPasswordForm.first"}})],1),r("div",{staticClass:"grid-column-12 grid-column-6--md grid-column-12--lg grid-column-6--xl"},[r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:newPasswordFirst",expression:"'required|confirmed:newPasswordFirst'"}],attrs:{label:e.$t("ui.password_new_confirm"),disabled:e.isLoading,error:e.errors.first("passwordNewConfirm","newPasswordForm"),type:"password",dataName:"passwordNewConfirm","data-vv-scope":"newPasswordForm"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updatePassword(t)}},model:{value:e.newPasswordForm.second,callback:function(t){e.$set(e.newPasswordForm,"second",t)},expression:"newPasswordForm.second"}})],1)]):r("div",{staticClass:"grid grid-row-gap-4 grid-column-gap-4--md grid-column-gap-0--lg grid-column-gap-4--xl"},[r("div",{staticClass:"grid-column-12"},[r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!0,regex:e.validation.email()},expression:"{ required: true, regex: validation.email() }"}],ref:"emailInput",attrs:{label:e.$t("ui.email"),readonly:e.isLoading,error:e.errors.first("email","recoveryForm"),type:"email",dataName:"email","autocomplete-native":"off","data-vv-scope":"recoveryForm"},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.restorePassword(t)}},model:{value:e.recoveryForm.email,callback:function(t){e.$set(e.recoveryForm,"email",t)},expression:"recoveryForm.email"}})],1)]),r("div",{staticClass:"flex flex-wrap justify-between padding-top-5"},[r("router-link",{staticClass:"order-1 order-initial--xl btn btn--plain width-full width-auto--xl margin-top-3 margin-top-0--xl",attrs:{to:{name:"signUp"}},domProps:{textContent:e._s(e.$t("ui.signup"))}}),r("div",{staticClass:"flex flex-wrap width-full width-auto--xl"},[r("router-link",{staticClass:"order-1 order-initial--xl btn btn--plain margin-right-2--xl width-full width-auto--xl",attrs:{to:{name:"signIn"}},domProps:{textContent:e._s(e.$t("ui.signin"))}}),e.$route.params.token?r("button",{staticClass:"btn btn--alt width-full width-auto--xl margin-bottom-3 margin-bottom-0--xl",attrs:{type:"button",disabled:!e.areNewPasswordFormFieldsValid||e.isLoading,"data-progress":e.isLoading},domProps:{textContent:e._s(e.$t("ui.save"))},on:{click:e.updatePassword}}):r("button",{staticClass:"btn btn--alt width-full width-auto--xl margin-bottom-3 margin-bottom-0--xl",attrs:{type:"button",disabled:!e.areRecoveryFormFieldsValid||e.isLoading,"data-progress":e.isLoading},domProps:{textContent:e._s(e.$t("ui.recover"))},on:{click:e.restorePassword}})],1)],1)])])])},a=[],n=(r("d3b7"),r("5530")),o=(r("96cf"),r("1da1")),i=r("e453"),d={name:"PasswordRecovery",components:{ImgSpotGray2:function(){return r.e("chunk-4f1ce744").then(r.t.bind(null,"a922",7))},ImgAuth:function(){return r.e("chunk-2cd8c95c").then(r.t.bind(null,"a012",7))},IconHome:function(){return r.e("chunk-c26fcd0e").then(r.t.bind(null,"ac9d",7))},LangMenu:function(){return Promise.all([r.e("chunk-5fbafd28"),r.e("chunk-42e2aca5")]).then(r.bind(null,"90ca"))},IconLogo:function(){return r.e("chunk-78e9b12a").then(r.t.bind(null,"5b1c",7))}},data:function(){return{isLoading:!1,validation:i["a"],recoveryForm:{email:""},newPasswordForm:{first:"",second:""}}},computed:{areRecoveryFormFieldsValid:function(e){return!e.errors.any("recoveryForm")&&e.recoveryForm.email},areNewPasswordFormFieldsValid:function(e){return!e.errors.any("newPasswordForm")&&e.newPasswordForm.first&&e.newPasswordForm.second}},mounted:function(){this.$route.params.token?this.$refs.newPasswordFirst.$el.querySelector("input").focus():this.$refs.emailInput.$el.querySelector("input").focus()},methods:{checkSecurity:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll("forgot");case 2:return r=t.sent,t.abrupt("return",r?Promise.resolve():Promise.reject());case 4:case"end":return t.stop()}}),t)})))()},restorePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isLoading=!0,t.next=4,e.checkSecurity();case 4:return t.next=6,e.$store.dispatch("user/passwordResetRequest",e.recoveryForm.email);case 6:e.$toasted.show(e.$t("text.password_recovery_successful"),{type:"success"}),e.recoveryForm.email="",e.$router.push({name:"signIn"}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error(t.t0);case 14:return t.prev=14,e.isLoading=!1,e.$validator.reset(),t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[0,11,14,18]])})))()},updatePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$validator.validateAll("form");case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:return e.isLoading=!0,t.prev=6,t.next=9,e.$store.dispatch("user/passwordReset",Object(n["a"])(Object(n["a"])({},e.newPasswordForm),{},{token:e.$route.params.token}));case 9:e.$toasted.show(e.$t("text.password_new_saved"),{type:"success"}),e.$router.push({name:"signIn"}),t.next=18;break;case 13:t.prev=13,t.t0=t["catch"](6),e.newPasswordForm.first="",e.newPasswordForm.second="",t.t0;case 18:return t.prev=18,e.isLoading=!1,e.$validator.reset(),t.finish(18);case 22:case"end":return t.stop()}}),t,null,[[6,13,18,22]])})))()}}},l=d,c=r("2877"),u=Object(c["a"])(l,s,a,!1,null,null,null);t["default"]=u.exports}}]);